/*!
 * bv-analytics.js v3.4.0
 * Bazaarvoice Analytics Client
 * Copyright 2015 Bazaarvoice, Inc.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(2),i=r(a),o=n(5),s=r(o),c=n(17),u="_bvaq",l="_bva";if(s["default"][u]=s["default"][u]||[],!s["default"][l]||s["default"][l]&&c(s["default"][l].version,"3.4.0")<0){var d=s["default"][l];s["default"][l]=new i["default"]({name:"default"}),d&&s["default"][l]._setStateFromTracker(d)}s["default"][u].length>0&&s["default"][l].push.apply(s["default"][l],s["default"][u]),s["default"][u]=s["default"][l]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e,n){"object"===("undefined"==typeof e?"undefined":o(e))&&(n=e,e=n.display||""),"object"===("undefined"==typeof t?"undefined":o(t))&&(n=t,e=n.display||"",t=n.client||""),n=n||{},this.name=n.name||"","string"==typeof t&&(n.client=t),"string"==typeof e&&(n.display=e),""!==this.name&&T["default"].trackers[this.name]&&w["default"].warn("A tracker with this name already exists: "+this.name),this._settings=c.extend({},this._defaults),this.version="3.4.0",this._shared={loadId:T["default"].loadId,tz:(new Date).getTimezoneOffset(),magpieJsVersion:this.version,source:n.source||null,environment:n.environment||null,client:n.client||null,dc:n.display||null},this._batch=null,this._unloaded=!1;var r=this;f["default"].add(S["default"],"unload",function(){r._unload()}),f["default"].add(S["default"],"beforeunload",function(){r._unload()}),this._bvCookiesRequest=B,this._requestQueue=[],this._id=null,this._idQueue=[],T["default"].trackers[this.name]=this}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=n(3),c=a(s),u=n(4),l=r(u),d=n(6),f=r(d),h=n(7),g=r(h),p=n(8),_=a(p),v=n(9),m=r(v),k=n(13),y=r(k),b=n(5),S=r(b),A=n(14),T=r(A),E=n(18),C=r(E),I=n(11),w=r(I),x=m["default"],R=!0,N={enableValidation:function(t){var e=t[t.length-1];return!e||"function"==typeof e||!!T["default"].trackers[e]}},P={"public":1,"private":1,internal:1},B=0,O=1,L=2,D=i.prototype;D.create=function(t){var e=t.name,n=T["default"].trackers[e];return n?(t.source&&n.setSource(t.source),t.environment&&n.setEnvironment(t.environment),t.client&&n.setClient(t.client),t.display&&n.setDisplay(t.display),n):new i(t)},D._defaults={trackerHostname:"network.bazaarvoice.com",anonTrackerHostname:"network-a.bazaarvoice.com",euTrackerHostname:"network.bazaarvoice.com",euAnonTrackerHostname:"network-eu-a.bazaarvoice.com",customTrackerHostname:null,customAnonTrackerHostname:null,anonymous:!0,eu:!1,brandDomain:null,timing:!0,staging:!1,eventFilter:null},D._set=function(t,e){this._settings[t]=e},D._get=function(t){return this._settings[t]},D._filterClass=function(t){var e=this.getEventClassFilter();return e&&!e.exec(t)},D._getProtocol=function(){return"https:"},D._setStateFromTracker=function(t){if("number"!=typeof t.length){for(var e,n=["Client","Source","Display","Staging","Audience","Anonymous","LoadId","BrandDomain","Environment","EventClassFilter","TrackerHostname","AnonTrackerHostname"],r=0;r<n.length;r++)e=n[r],this["set"+e](t["get"+e]());return this}},D._trackerUrl=function(t,e){var n=this._getProtocol()+"//"+this.getTrackerHostname()+"/"+t;return e&&(n+="?_="+c.buster()),n},D._trackerHostname=function(t){if(R){var e=this.getEU(),n=this.getAnonymous(),r=this._get("customAnonTrackerHostname");if(e&&n&&!t&&!r)return this._get("anonTrackerHostname")}return this.getAnonymous()?this.getAnonTrackerHostname():this.getTrackerHostname()},D._getPixel=function(t,e){var n=this.getAnonymous(),r=this._trackerHostname(e),a=this._getBrandCookies();return new x(this.isValidating(),n,r,this._shared,a,t)},D._send=function(t){t.validating?this._sendValidatingRequest(t):t.anonymous?this._sendRequest(t.url):this._sendTrackedRequest(t)},D._sendTrackedRequest=function(t){var e=this;e._bvCookiesRequest===B&&e._setBVCookies(),e._bvCookiesRequest===L?e._sendRequest(t.url):e._requestQueue.push(t)},D._setBVCookies=function(){var t=this,e=t._trackerUrl("sid.gif",!0);t._sendRequest(e,function(){t._bvCookiesRequest=L,t._flushRequestQueue(),t._loadBVID()}),t._bvCookiesRequest=O},D._flushRequestQueue=function(){for(;this._requestQueue.length;)this._send(this._requestQueue.shift())},D._sendRequest=function(t,e){var n;n=new Image(1,1),c.isFunction(e)&&(n.onload=function(){n.onload=null,e()}),n.src=t},D._sendValidatingRequest=function(t){var e=this._get("validationCallback");l["default"].get(t.url,function(n){c.isFunction(e)?e(n,t.data):n.error&&w["default"].error("Invalid Magpie event: "+n)})},D._loadBVID=function(){var t=this,e=t._trackerUrl("id.json",!0),n=t.getTrackerHostname();l["default"].get(e,function(e){t._id=e,t._id.hostname=n,t._flushIdQueue()})},D._flushIdQueue=function(){for(var t,e=this._id,n=this._idQueue;n.length;)t=n.shift(),c.isFunction(t)&&t(e)},D._unload=function(){this._unloaded||(this.flushBatch(),this._unloaded=!0)},D._setBrandCookies=function(t){var e=1/48,n=365;t&&navigator.cookieEnabled&&(_.read("BVBRANDID")||_.create("BVBRANDID",c.uuid(),n,t),_.read("BVBRANDSID")||_.create("BVBRANDSID",c.uuid(),e,t))},D._getBrandCookies=function(){var t={BVBRANDID:null,BVBRANDSID:null};return null!==this.getBrandDomain()&&navigator.cookieEnabled&&(t.BVBRANDID=_.read("BVBRANDID")||null,t.BVBRANDSID=_.read("BVBRANDSID")||null),t},D._timing=function(){var t,e=S["default"].performance||S["default"].webkitPerformance||S["default"].mozPerformance||S["default"].oPerformance||S["default"].msPerformance||!1;return e!==!1&&e.timing?(t=e.timing,{dns:t.domainLookupEnd-t.domainLookupStart,con:t.connectEnd-t.connectStart,req:t.responseStart-t.connectEnd,res:t.responseEnd-t.responseStart,load:t.loadEventStart-t.responseEnd,tot:t.loadEventEnd-t.navigationStart}):{}},D._isPII=function(t){return t&&"pii"===t.substring(0,3).toLowerCase()},D.setClient=function(t){this._shared.client=t},D.getClient=function(){return this._shared.client},D.setDisplay=function(t){this._shared.dc=t},D.getDisplay=function(){return this._shared.dc},D.setAnonymous=function(t){this._set("anonymous",t)},D.getAnonymous=function(){return this._get("anonymous")},D.setEU=function(t){this._set("eu",t)},D.getEU=function(){return this._get("eu")},D.setTrackerHostname=function(t){this._set("customTrackerHostname",t),this._id=null,this._bvCookiesRequest=B},D.getTrackerHostname=function(){var t=this._get("customTrackerHostname");return t?t:this.getEU()?this._get("euTrackerHostname"):this._get("trackerHostname")},D.setAnonTrackerHostname=function(t){this._set("customAnonTrackerHostname",t)},D.getAnonTrackerHostname=function(){var t=this._get("customAnonTrackerHostname");return t?t:this.getEU()?this._get("euAnonTrackerHostname"):this._get("anonTrackerHostname")},D.setBrandDomain=function(t){c.isString(t)&&t.length>0?this._setBrandCookies(t):t=null,this._set("brandDomain",t)},D.getBrandDomain=function(){return this._get("brandDomain")},D.enableTiming=function(){this._set("timing",!0)},D.disableTiming=function(){this._set("timing",!1)},D.setSource=function(t){this._shared.source=t},D.getSource=function(){return this._shared.source},D.setEnvironment=function(t){this._shared.environment=t},D.getEnvironment=function(){return this._shared.environment},D.setAudience=function(t){var e=this._shared;P[t]&&("public"===t?delete e.audience:e.audience=t)},D.getAudience=function(){return this._shared.audience||"public"},D.enableValidation=function(t){this._set("validate",!0),c.isFunction(t)&&this._set("validationCallback",t),this._prevTracker=this.getTrackerHostname(),this._prevAnonTracker=this.getAnonTrackerHostname(),this.setTrackerHostname("schema.mag.bazaarvoice.com"),this.setAnonTrackerHostname("schema.mag.bazaarvoice.com")},D.disableValidation=function(){this._set("validate",!1),this._set("validationCallback",null),this._prevTracker&&(this.setTrackerHostname(this._prevTracker),this._prevTracker=null),this._prevAnonTracker&&(this.setAnonTrackerHostname(this._prevAnonTracker),this._prevAnonTracker=null)},D.isValidating=function(){return this._get("validate")},D.setStaging=function(t){this._set("staging",!!t),t&&(this.setTrackerHostname("network-stg.bazaarvoice.com"),this.setAnonTrackerHostname("network-stg-a.bazaarvoice.com"))},D.getStaging=function(){return this._get("staging")},D.getEventClassFilter=function(){return this._get("eventClassFilter")},D.setEventClassFilter=function(t){if(c.isString(t))try{t=new RegExp(t)}catch(e){w["default"].error("Invalid regex passed to event class filter.")}this._set("eventClassFilter",t)},D.getID=function(t){c.isFunction(t)&&(this._id?t(this._id):this._idQueue.push(t))},D.trackEvent=function(t,e){var n;if(!this._filterClass(t))if(e=e||{},e.cl=t,c.transformData(e,"Brand","brand"),this._isPII(t)){var r=this.getAnonymous();this.setAnonymous(!0),n=this._getPixel(e,!0),this._send(n),this.setAnonymous(r);var a={bvProduct:e.bvProduct,cl:e.cl,detail1:e.detail1,name:e.name,productId:e.productId};T["default"].dispatcher.fireCallbacks(t,a,this.name)}else n=this._getPixel(e),this._send(n),T["default"].dispatcher.fireCallbacks(t,n.ev,this.name)},D.trackPageView=function(t){t=t||{},c.extend(t,g["default"]),this._get("timing")&&(t.t=this._timing()),this.trackEvent("PageView",t)},D.trackConversion=function(t){var e=y["default"].create(t);e&&(e.containsPII()&&this.trackEvent(y["default"].PII_EVENT_CLASS,e.getPIIData()),this.trackEvent(y["default"].EVENT_CLASS,e.getAnonymizedData()))},D.trackTransaction=function(t){function e(t){if(t=c.extend({},t||{}),"transaction_id"in t&&(t.orderId=t.transaction_id,delete t.transaction_id),"products"in t&&(t.items=t.products,delete t.products),c.isArray(t.items)){var e,n;for(e=0,n=t.items.length;e<n;e++)t.items[e].orderId=t.orderId,"product_id"in t.items[e]&&(t.items[e].sku=t.items[e].product_id,delete t.items[e].product_id)}var r={type:"Transaction",label:"TransactionThankYou",value:null};for(var a in r)"undefined"==typeof t[a]&&(t[a]=r[a]);return t}this.trackConversion(e(t))},D.addMeta=function(t,e){this._shared.meta||(this._shared.meta={}),this._shared.meta[t]=e},D.removeMeta=function(t){var e=this._shared.meta;t in e&&e.hasOwnProperty(t)&&delete e[t]},D.addBatch=function(t){this._batch&&this._batch.items.length>0&&this.flushBatch(),this._batch={data:t||{},items:[]}},D.addBatchItem=function(t,e){var n;if(!this._filterClass(t)){if(this._isPII(t))return this.trackEvent(t,e);e=e||{},e.cl=t,c.transformData(e,"Brand","brand"),T["default"].dispatcher.fireCallbacks(t,this._getPixel(e).ev,this.name),this._batch||this.addBatch(),this._batch.items.push(e),n=this._getPixel(this.getBatch()),n.tooLong&&(this._batch.items.pop(),0===this._batch.items.length?this._send(n):(this.flushBatch(),this._batch.items.push(e)))}},D.flushBatch=function(){this._batch&&this._batch.items&&0!==this._batch.items.length&&(this._send(this._getPixel(this.getBatch())),this._batch.items=[])},D.getBatch=function(){return this._batch?c.extend({batch:this._batch.items},this._batch.data):""},D.push=function(){try{for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];if(c.isFunction(n))n.call(S["default"]);else if(c.isArray(n)){if(0===n.length)continue;var r=n[0];if(!c.isString(r)||"_"===r.charAt(0))continue;if(!c.isFunction(this[r]))continue;var a=n.slice(1),i=a[a.length-1],o=T["default"].trackers[i];if(!o){var s=!N[r]&&this[r].length===a.length||N[r]&&N[r](a);if(!s){w["default"].warn("No tracker was found with the name "+i);var u={name:"Implementation Error",type:"Error",source:"analyticsjs",detail1:"Named tracker was not found",detail2:i,detail3:r};this.trackEvent("Error",u);continue}o=T["default"].trackers["default"]}o[r].apply(o,a)}}}catch(l){w["default"].error(l.stack)}return 1},D.resetLoadId=function(){this._shared.loadId=c.loadId()},D.setLoadId=function(t){this._shared.loadId=t},D.getLoadId=function(){return this._shared.loadId},D.configureSCIProvider=function(t,e){var n=C["default"].create(t,e);this.registerListener("*",n,this.name)},D.registerListener=function(t,e,n){return"function"==typeof t&&(n=e,e=t,t="*"),"function"!=typeof e?void w["default"].warn("registerListener arg callback must be a function"):"string"!=typeof n||"undefined"==typeof n?void w["default"].warn("registerListener arg name must be a string."):void T["default"].dispatcher.registerCallback(t,e,n)},t.exports=i},function(t,e){"use strict";function n(t){var e,n,r=[].slice.call(arguments,1);for(var a in r)if(r.hasOwnProperty(a)){e=r[a];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t}function r(){return Math.round(2147483647*Math.random()).toString(36)}function a(t){return"[object Array]"===g.call(t)}function i(t){return s(t)&&"[object Function]"===g.call(t)}function o(t){return"string"==typeof t||u(t)&&"[object String]"===g.call(t)}function s(t){var e="undefined"==typeof t?"undefined":h(t);return!!t&&("object"===e||"function"===e)}function c(t){return"number"==typeof t||u(t)&&"[object Number]"===g.call(t)}function u(t){return!!t&&"object"===("undefined"==typeof t?"undefined":h(t))}function l(){for(var t=16,e=20,n=Math.floor(Math.random()*(e-t+1)+t),r="",a=0;a++<n;)r+=(16*Math.random()|0).toString(16);return r}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:e%4+8;return n.toString(16)})}function f(t,e,n){"undefined"!=typeof t&&null!==t&&e!==n&&t.hasOwnProperty(e)&&(t[n]=t[e],delete t[e])}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},g=Object.prototype.toString;t.exports={extend:n,buster:r,isArray:a,isFunction:i,isString:o,isObject:s,isNumber:c,isObjectLike:u,loadId:l,uuid:d,transformData:f}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){var e=g.createElement("script"),n=!1;e.src=t,e.async=!0,e.onload=e.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,e.onload=e.onreadystatechange=null,e&&e.parentNode&&e.parentNode.removeChild(e))},s||(s=g.getElementsByTagName("head")[0]),s.appendChild(e)}function o(t,e,n){var r,a=(t||"").indexOf("?")===-1?"?":"&";return u.isFunction(e)&&(r="_bvajsonp"+ ++f,h[r]=function(t){try{delete h[r]}catch(n){h[r]=null}e(t)},i(t+a+(n||"callback")+"="+r)),r}var s,c=n(3),u=a(c),l=n(5),d=r(l),f=0,h=d["default"],g=document;t.exports={get:o}},function(t,e){"use strict";t.exports=new Function("return this;")()},function(t,e){"use strict";function n(t,e,n,r){t.addEventListener?t.addEventListener(e,n,!!r):t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,!!r):t.detachEvent&&t.detachEvent("on"+e,n)}t.exports={add:n,remove:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a,i,o=n(5),s=r(o),c=s["default"].navigator,u=s["default"].screen,l=document,d=l.getElementsByTagName("link"),f=d.length;for(i=0;i<f;i++)"canonical"===d[i].getAttribute("rel")&&(a=d[i].href);t.exports={host:s["default"].location.host,ref:l.referrer,canurl:a,res:u?u.width+"x"+u.height:"-",lang:(c&&(c.language||c.browserLanguage)||"-").toLowerCase(),charset:l.characterSet||l.charset||"-",geo:navigator.geolocation?1:0,cookies:navigator.cookieEnabled?1:0}},function(t,e,n){var r=n(5);t.exports={create:function(t,e,n,a,i){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var s=n?";expires="+o.toGMTString():"",c=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+";path=/"+(a?";domain="+a:"")+(i?";secure":"");r.document.cookie=c},read:function(t){var e,n=encodeURIComponent(t)+"=",a=r.document.cookie.split(";");for(e=0;e<a.length;e++){for(var i=a[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return decodeURIComponent(i.substring(n.length,i.length))}return null},remove:function(t){this.create(t,"",-1)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e,n,r,a,i){var o=(e?"a":"st")+(t?".json":".gif");this.anonymous=e,this.hostname=n,this._baseUrl=m+"://"+this.hostname+"/"+o,this._sharedData=r,this._brandCookies=a,this.data=i,this.tooLong=!1,this.validating=t,s.isObject(this.data)?(this.data.cl=this.data.cl||null,this.ev=this._buildEvent(this.data),this.url=this._buildUrl({ev:this.ev,ignoreTooLong:!1})):this.url=""}var o=n(3),s=a(o),c=n(10),u=r(c),l=n(11),d=r(l),f=n(12),h="r_",g=2036,p=f?g:8192,_={PageView:{ref:1}},v={cl:0,loadId:1,type:2},m="https";i.prototype._buildEvent=function(t){var e=s.extend({},this._sharedData,this._brandCookies,t);return e._=s.buster(),e},i.prototype._buildUrl=function(t){var e,n,r,a=t||{};return(e=this.encode(t.ev))?(n=this._baseUrl+"?"+e.required,r=p-n.length,r<0?(n=a.ignoreTooLong?"":this._urlTooLong(n,e),this.tooLong=!0):e.optional.length>0&&(n+=this.addOptional(e.optional,r)),n):""},i.prototype._urlTooLong=function(t,e){var n={cl:"Magpie",type:"LongUrl",length:(t||"").length,maxLength:p,targetCl:this.data.cl?this.data.cl.substr(0,200):null,longestField:e.longestField.substr(0,200)};return this._buildUrl({ev:this._buildEvent(n),ignoreTooLong:!0})},i.prototype.addOptional=function(t,e){var n,r,a,i,o="";for(t=t||[],i=t.length,n=0;e>0&&n<i;n++)r=t[n]||"",r.length+1>e&&(r=r.substr(0,e-1),r.indexOf("=")===-1)||(a="&"+r,o+=a,e-=a.length);return o},i.prototype.quoteParam=function(t,e){var n=null;if(void 0!==t&&void 0!==e)try{(s.isArray(e)||s.isObject(e))&&(t=h+t,e=u["default"].encode(e)),n=u["default"].quote(t)+"="+u["default"].quote(""+e)}catch(r){d["default"].error(r.stack)}return n},i.prototype.encode=function(t){var e,n,r=_[t.cl]||{},a=0,i=[],o=[],c={optional:[],longestField:null};if(!s.isObject(t))return null;for(e in t)if(t.hasOwnProperty(e)&&null!==t[e]&&t[e]===t[e]&&(n=this.quoteParam(e,t[e]),null!==n))if(r&&e in r)c.optional.push(n);else{if(e in v){var u=v[e];i.length>u?i.splice(u,0,n):i.push(n)}else o.push(n);n.length>a&&(c.longestField=e,a=n.length)}return c.required=i.concat(o).join("&"),c},t.exports=i},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r={};r.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var t=[],e=0;e<16;e++)for(var n=0;n<16;n++)if(e+n!==0){var a=String.fromCharCode(16*e+n);/\w|[\-_.\/~]/.test(a)||t.push("\\u00"+e.toString(16)+n.toString(16))}r.not_idchar=t.join("")}(),r.not_idchar=" \t\r\n\"<>\\[\\]{}'!=:(),*@$;&",r.not_idstart="-0123456789",function(){var t="[^"+r.not_idstart+r.not_idchar+"][^"+r.not_idchar+"]*";r.id_ok=new RegExp("^"+t+"$"),r.next_id=new RegExp(t,"g")}(),r.quote=function(t){var e=r.uri_ok;return/^[A-Za-z0-9_\-]*$/.test(t)?t:(t=t.replace(/([^A-Za-z0-9_\-])/g,function(t,n){var r=e[n];return r?n:encodeURIComponent(n)}),t.replace(/%20/g,"+"))},function(){var t={"'":!0,"!":!0},e={array:function(t){var r,a,i,o,s=["!("],c=t.length;for(i=0;i<c;i+=1)o=t[i],a=e["undefined"==typeof o?"undefined":n(o)],a&&(o=a(o),"string"==typeof o&&(r&&(s[s.length]=","),s[s.length]=o,r=!0));return s[s.length]=")",s.join("")},"boolean":function(t){return t?"!t":"!f"},"null":function(t){return"!n"},number:function(t){return isFinite(t)?String(t).replace(/\+/,""):"!n"},object:function(t){if(t){if(t instanceof Array)return e.array(t);if("object"===n(t.__prototype__)&&"undefined"!=typeof t.__prototype__.encode_rison)return t.encode_rison();var r,a,i,o,s,c=["("],u=[];for(i in t)u[u.length]=i;for(u.sort(),s=0;s<u.length;s++)i=u[s],o=t[i],a=e["undefined"==typeof o?"undefined":n(o)],a&&(o=a(o),"string"==typeof o&&(r&&(c[c.length]=","),c.push(e.string(i),":",o),r=!0));return c[c.length]=")",c.join("")}return"!n"},string:function(e){return""===e?"''":r.id_ok.test(e)?e:(e=e.replace(/(['!])/g,function(e,n){return t[n]?"!"+n:n}),"'"+e+"'")},undefined:function(t){return"!n"}};r.encode=function(t){return e["undefined"==typeof t?"undefined":n(t)](t)}}(),t.exports=r},function(t,e,n){function r(t,e){if(s!==h.OFF&&a.console){if(e=[].slice.call(e),"function"==typeof e[0]&&(e=e[0]()),i)return void console.log(e);try{(console[t]||console.log).apply(console,e)}catch(n){}}}var a=n(5),i=n(12),o=n(8),s=4,c={},u=o.read("_bvui_debug");if(u)for(var l,d=u.split(","),f=0;f<d.length;f++)l=d[f].split(":"),c[l[0]]=l[1];c.logLevel&&(s=c.logLevel);var h={DEBUG:-1,LOG:0,INFO:1,WARN:2,ERROR:3,OFF:4,getLogLevel:function(){return s},setLogLevel:function(t,e){s=!c.logLevel||e?t||h.LOG:c.logLevel,r("log",["Log level set to",s])},debug:function(){s<=h.DEBUG&&r("log",arguments)},log:function(){s<=h.LOG&&r("log",arguments)},info:function(){s<=h.INFO&&r("info",arguments)},warn:function(){s<=h.WARN&&r("warn",arguments)},error:function(){s<=h.ERROR&&r("error",arguments)},count:function(){s<h.INFO&&r("count",arguments)},time:function(){s<h.WARN&&r("time",arguments)},timeEnd:function(){s<h.WARN&&r("timeEnd",arguments)},group:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("group",e),r("time",e))},groupEnd:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("groupEnd",e),r("timeEnd",e))},assert:function(t,e){if(s!==h.OFF){if("function"==typeof t)return void h.assert.apply(null,t());if(!t)throw new Error("Assertion failed: "+e)}}};t.exports=h},function(t,e,n){var r=n(5).document;t.exports=function(){var t=function(t,e,n){for(var r=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:n}(3,r.createElement("div"));return t}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){var n=t&&t[e];return null!==n&&void 0!==n}function i(t,e){var n=e.length;if(!c.isObject(t)&&n<0)return!1;for(;n--;)if(!a(t,e[n]))return!1;return!0}function o(t){return i(t,f)}var s=n(3),c=r(s),u="Conversion",l="PII"+u,d={orderId:1,affiliation:1,total:1,tax:1,shipping:1,city:1,state:1,country:1,currency:1,items:1,locale:1,type:1,label:1,value:1,proxy:1,partnerSource:1,TestCase:1,TestSession:1},f=["type"],h="public_",g=function(t){var e;this._data=t,this._anonymized={},this._hasPII=!1;for(e in t)t.hasOwnProperty(e)&&(d[e]||0===e.indexOf(h)?this._anonymized[e]=t[e]:this._hasPII=!0);this._hasPII===!0&&(this._anonymized.hadPII=!0)},p=g.prototype;p.containsPII=function(){return this._hasPII},p.getAnonymizedData=function(){return this._anonymized},p.getPIIData=function(){return this._data},t.exports={EVENT_CLASS:u,PII_EVENT_CLASS:l,create:function(t){return o(t)?new g(t):null}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),i=n(15),o=r(i),s=n(16),c=r(s),u=n(17),l=o["default"].namespace("BVA");try{l.registerProperty("trackers",{})}catch(d){}try{l.registerProperty("loadId",(0,a.loadId)())}catch(d){}try{l.registerProperty("dispatcher",new c["default"])}catch(d){var f=l.dispatcher.version,h=c["default"].prototype.version;1===u(h,f)&&(l.dispatcher=c["default"].copy(l.dispatcher))}t.exports=l},function(t,e,n){function r(t){this.name=t}var a=n(5);r.prototype.registerProperty=function(t,e){if(this.hasOwnProperty(t))throw new Error("Cannot register "+t+" because a property with that name already exists on window."+this.name);return this[t]=e,this},t.exports={namespace:function(t){if(void 0===a[t])a[t]=new r(t);else{if("object"!=typeof a[t])throw new Error("Namespace "+t+" cannot be created. A non-object variable is already assigned to window."+t);if(!(a[t]instanceof r)){r.call(a[t],t);for(var e in r.prototype)a[t][e]=r.prototype[e]}}return a[t]}}},function(t,e,n){"use strict";function r(){this.callbacks={"default":{"*":[]}}}r.prototype.registerCallback=function(t,e,n){this.callbacks[n]=this.callbacks[n]||{"*":[]},this.callbacks[n][t]=this.callbacks[n][t]||[],this.callbacks[n][t].push(e)},r.prototype.fireCallbacks=function(t,e,n){if("undefined"!=typeof this.callbacks[n]){var r=this.callbacks[n][t];r&&r.forEach(function(t){t(e)}),"*"!==t&&this.callbacks[n]["*"].forEach(function(t){t(e)})}},r.prototype.version="3.4.0",r.copy=function(t){var e=new r;return e.callbacks=t.callbacks,e},t.exports=r},function(t,e){t.exports=function(t,e){for(var n=t.split("."),r=e.split("."),a=0;a<3;a++){var i=Number(n[a]),o=Number(r[a]);if(i>o)return 1;if(o>i)return-1;if(!isNaN(i)&&isNaN(o))return 1;if(isNaN(i)&&!isNaN(o))return-1}return 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_global=__webpack_require__(5),_global2=_interopRequireDefault(_global),_logger=__webpack_require__(11),_logger2=_interopRequireDefault(_logger),vendorMap={ADOBE:"AdobeSiteCatalyst",IBM:"IBMDigitalAnalytics",GOOGLE:"GoogleAnalytics"},eventGroup="Bazaarvoice",delimiter=" : ",trackingMap={Ask:{label:["Button"]},Click:{label:["SecondaryContentLink","ViewProfileButton","Stars","ReadReviewButton","SummaryStars","WriteReviewLabel","ReviewCount","SummaryQuestionStats","YesHelpfulVote","NoHelpfulVote","ReportLink","UserSubmittedMedia","YesVote","NoVote","Report","UserSubmittedPhoto"]},Close:{label:["Submission","SecondaryContent","UserSubmittedMedia","Search","UserSubmittedPhoto"]},Filter:{label:["1Star","2Stars","3Stars","4Stars","5Stars","Clear1Star","Clear2Stars","Clear3Stars","Clear4Stars","Clear5Stars","ClearAll"]},Hover:{label:["Histogram","Profile"]},Paginate:{label:["First","Last","Next","Prev"]},Search:{label:["UserGeneratedContent","SearchBarRatingSummary","TopicsAndReviews"]},Share:{label:["Button"]},Sort:{label:["featured","mostRecent","oldest","positive","negative","mostHelpful","mostUnhelpful","relevancy","recentQuestionsFirst","recentQuestionsLast","recentAnswersFirst","recentAnswersLast","mostAnsweredQuestionsFirst","mostAnsweredQuestionsLast","featuredQuestionsFirst","helpfulnessAnswersFirst","helpfulnessAnswersLast"]},Write:{label:["Button"]}},getSiteCatalystTracker=function(t){var e=t||"s",n=_global2["default"][e];return n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))?n:void _logger2["default"].warn(e+" bad trackerRef")},getGoogleAnalyticsTracker=function getGoogleAnalyticsTracker(vendorTracker,method){var trackerRef=vendorTracker,trackerMethod=method,tracker,trackerType="object";if(trackerRef){if(!method)if("pageTracker"===trackerRef)trackerMethod="SYNCHRONOUS";else if("_gaq"===trackerRef)trackerMethod="ASYNCHRONOUS";else{if("ga"!==trackerRef)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerMethod");trackerMethod="UNIVERSAL"}}else if(trackerMethod&&"SYNCHRONOUS"!==trackerMethod||"object"!==("undefined"==typeof pageTracker?"undefined":_typeof(pageTracker)))if(trackerMethod&&"ASYNCHRONOUS"!==trackerMethod||"object"!==_typeof(_global2["default"]._gaq)){if(trackerMethod&&"UNIVERSAL"!==trackerMethod||"function"!=typeof _global2["default"].ga)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerRef");trackerRef="ga",trackerMethod="UNIVERSAL"}else trackerRef="_gaq",trackerMethod="ASYNCHRONOUS";else trackerRef="pageTracker",trackerMethod="SYNCHRONOUS";if("ga"!==trackerRef&&"UNIVERSAL"!==trackerMethod||(trackerType="function"),tracker=_global2["default"][trackerRef],!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType){try{tracker=eval(trackerRef)}catch(e){return}if(!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType)return void _logger2["default"].warn(trackerRef+" bad trackerRef")}return"SYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker._trackEvent(t,e,n,r,a)}}:"ASYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker.push(["_trackEvent",t,e,n,r,a])}}:"UNIVERSAL"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker("send","event",t,e,n,r,{nonInteraction:a})}}:void _logger2["default"].warn("getGoogleAnalyticsTracker: trackEvent could not be defined")},callWap=function(t,e){for(var n={},r=[],a=2;a<arguments.length;a++)r.push((arguments[a]||"").toString());var i=r.join("~#~");if(!n[i]){n[i]=!0;try{e.apply(t,[].slice.call(arguments,2))}catch(o){_logger2["default"].error("Error calling WAP: "+o.stack)}}},isEventTracked=function(t,e,n){if("Feature"===t&&e in trackingMap)for(var r=0;r<trackingMap[e].label.length;r++)if(trackingMap[e].label[r]===n||"ANY"===trackingMap[e].label[r])return!0;return!1},adobeSiteCatalystCallback=function(t){var e=t||{},n=getSiteCatalystTracker(e.tracker||null);return n?function(t){if(isEventTracked(t.cl,t.name,t.detail1)){var r=_global2["default"].event||_global2["default"],a=e.event,i=e.evar,o=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1),s=eventGroup+delimiter+t.bvProduct+delimiter+t.name+o;n.linkTrackEvents="event"+a,n.events="event"+a,n["eVar"+i]=s,n.linkTrackVars="events,evar"+i,n.products&&(n.linkTrackVars+=",products",n.products=n.products.replace(/([^,;]*;[^,;]*);[^,]*/g,"$1")),n.linkTrackVars+=",eVar"+i,callWap(n,n.tl,r,"o",s+delimiter+t.productId)}}:function(){}},ibmDigitalAnalyticsCallback=function(t){if("object"===_typeof(_global2["default"].cG7)&&isEventTracked(t.cl,t.name,t.detail1)){var e=_global2["default"].cG7.cM0[_global2["default"].cm_ClientID],n=eventGroup+delimiter+t.bvProduct,r=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(_global2["default"],_global2["default"].cmCreateElementTag,t.name+r,n),_global2["default"].cG7.cM0[_global2["default"].cm_ClientID]=e}},googleAnalyticsCallback=function(t){var e=t||{},n=getGoogleAnalyticsTracker(e.tracker||null,e.method);return n?function(t){var e=eventGroup+delimiter+t.bvProduct+delimiter,r=_global2["default"].location.pathname;if("PageView"===t.cl&&t.bvProduct)callWap(n,n.trackEvent,"Bazaarvoice Content Loaded",e+"Product"+t.cl,r,void 0,!0);else if(isEventTracked(t.cl,t.name,t.detail1)){var a=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(n,n.trackEvent,eventGroup+" "+t.bvProduct,e+t.name+a,r,void 0,!1)}}:function(){}};module.exports={create:function(t,e){switch(t){case vendorMap.ADOBE:return adobeSiteCatalystCallback(e);case vendorMap.IBM:return ibmDigitalAnalyticsCallback;case vendorMap.GOOGLE:return googleAnalyticsCallback(e)}throw _logger2["default"].error("Error creating vendor callback. The named vendor integration was not found."),new Error("The named vendor integration was not found.")},_getSiteCatalystTracker:getSiteCatalystTracker,_getGoogleAnalyticsTracker:getGoogleAnalyticsTracker,_isEventTracked:isEventTracked,_callWap:callWap}}]);